@model banimo.ViewModel.subMenuVM
@using Newtonsoft.Json;
@{
    ViewBag.Title = "submenu";
    Layout = "~/Views/Shared/_Layout4.cshtml";
}

@section scripts{

    <link href="~/Content/indexStyle.css" rel="stylesheet" />
    <script>
        $(".showItem").click(function () {
            $(".descButton").toggle();
            $(".matn").css("overflow", "unset")
            $(".matn").css("max-height", "unset")
            $('.matn').addClass('newBefor');
        });
        $(".hideItem").click(function () {
            $(".descButton").toggle();
            $(".matn").css("overflow", "hidden")
            $(".matn").css("max-height", "150px")
            $('.matn').removeClass('newBefor');
        });

    </script>

}

<style>
    .submenuHeader {
        width: 100% !important;
        display: flex !important;
        align-items: center;
        direction: rtl
    }

    .slidesection {
        width: 66%;
        margin: 10px auto;
    }

    .banerSection {
        width: 33%;
    }

    .bannerholder {
        padding: 0 !important
    }
    @@media only screen and (max-width: 600px) {
        .submenuHeader {
            width: 100% !important;
            display: block !important;
        }

        .slidesection {
            width: 100%;
            margin: 10px auto;
            padding:5px;
        }

        .banerSection {
            width: 100%;
        }
    }
</style>
<div class="slidesectionParent submenuHeader" style="">
    <div class="slidesection" style="">
        @if (Model.slides != null)
        {
            <div class="  ">
                <div id="myCarousel" class="carousel slide" data-ride="carousel">

                    <ol class="carousel-indicators">
                        @foreach (var item in Model.slides)
                        {
                            string src = "/images/panelimages/" + item.image;
                            var index = Model.slides.IndexOf(item);
                            if (index == 0)
                            {
                                <li data - target="#myCarousel" data-slide-to="@index" class="active"></li>
                            }
                            else
                            {
                                <li data-target="#myCarousel" data-slide-to="@index"></li>
                            }

                        }


                    </ol>

                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        @foreach (var item in Model.slides)
                        {
                            string src = "/images/panelimages/" + item.image;
                            if (Model.slides.IndexOf(item) == 0)
                            {
                                <div class="item active">
                                    <img style="cursor:pointer" src="@src" alt="@item.title" class="mySlide" id='@item.type-@item.catIDOrLink'>
                                </div>
                            }
                            else
                            {
                                <div class="item ">
                                    <img style="cursor:pointer" src="@src" alt="@item.title" class="mySlide" id='@item.type-@item.catIDOrLink'>
                                </div>
                            }

                        }

                    </div>
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                        <span class="sr-only">Next</span>
                    </a>


                    <!-- Left and right controls -->

                </div>
            </div>


        }
    </div>
    <div class="banerSection" >
        @if (Model.banners != null)
        {
            <div class="row bannerholder" style="padding: 0!important">
                <div class="row bannerrow1" style=" ">
                    @if (Model.banners.Count >= 1)
                    {

                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-6  " style="padding:2px 0">
                            <div class="imageparent">
                                <img style="        border-radius: 5px;
        width: 100%;
        max-height: 100%;
        object-fit: contain
" alt="بنر" class="banner bannerimage" src='@System.Configuration.ConfigurationManager.AppSettings["domain"]/images/panelimages/@Model.banners[0].image' id='@Model.banners[0].type-@Model.banners[0].catIDOrLink' />
                            </div>
                        </div>



                    }
                    @if (Model.banners.Count >= 2)
                    {
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-6  " style="padding:2px 0">
                            <div class="imageparent">
                                <img style="border-radius:5px; width:100%; max-height:100%; object-fit:contain" alt="بنر" class="banner bannerimage" src='@System.Configuration.ConfigurationManager.AppSettings["domain"]/images/panelimages/@Model.banners[1].image' id='@Model.banners[1].type-@Model.banners[1].catIDOrLink' />
                            </div>
                        </div>

                    }

                </div>
                <script>
                    $(".banner").each(function () {

                        if (($(this).attr('id').indexOf("empty") >= 0)) {

                            $(this).css("cursor", "default");
                        }
                    })
                    $(".banner").click(function () {
                        var val = $(this).attr('id');
                        if (!(val.indexOf("empty") >= 0)) {
                            window.location.href = "/Home/ManageBanner?val=" + $(this).attr('id');

                        }
                    })


                    $(".mySlide").each(function () {

                        if (($(this).attr('id').indexOf("empty") >= 0)) {

                            $(this).css("cursor", "default");
                        }
                    })
                    $(".mySlide").click(function () {
                        var val = $(this).attr('id');

                        if (!val.contain('image')) {
                            window.location.href = "/Home/ManageSlide?val=" + $(this).attr('id');

                        }
                    })

                </script>
            </div>

        }
    </div>

</div>
@if (Model.wonderList != null)
{

    <div class=" DSK">
        <div style="background-color: #f6f5f5; padding: 2% 0px;padding: 20px; background-color:#ef394e; display:flex; align-items:center">
            <div class="" style=" width:80%">

                <div id="bestholder" class="resCarousel" data-items="3-4-4-4" data-slide="1" data-speed="100">

                    <div class="resCarousel-inner">
                        @foreach (var item in Model.wonderList)
                        {
                            string addID = "addtocarto" + item.ID;
                            string minusID = "minus" + item.ID;
                            string imagefile = "placeholder.jpg";
                            List<string> srtlist = new List<string>();
                            string src2 = "";
                            if (item.title != null)
                            {

                                srtlist = item.image.Trim(',').Split(',').ToList();
                                imagefile = srtlist[0];
                                if (srtlist.Count == 2)
                                {
                                    src2 = srtlist[1];
                                }
                            }


                            string ID = "N" + item.ID.ToString();
                            string addtocartid = "addtocart" + ID;
                            string price = item.price;

                            string src = imagefile;
                            string newurl = "/Home/ProductDetail?id=" + item.ID;
                            if (item.meta != null)
                            {
                                banimo.ViewModePost.metaData metaModel = JsonConvert.DeserializeObject<banimo.ViewModePost.metaData>(@item.meta);
                                newurl = metaModel.curl;
                            }

                            <div class="item showmedetail" id=@ID style="cursor:pointer;">

                                <div class="showmedetailFirstDiv showmedetailx" style="background-color:white;">
                                    <div style="padding:5px 0px">
                                        <a href="@newurl" nofollow>
                                            <div class="imageholderindex" style="height: 160px !important; border-radius:5px">
                                                <img srt2="@src2" srt1="@src" alt="@item.title" class="imageitself" src="@src" style=" border-radius:5px" />
                                            </div>
                                        </a>
                                        <div class="">
                                            @{
                                                if (@System.Configuration.ConfigurationManager.AppSettings["numberType"] == "1")
                                                {
                                                    <p style="" class="numEn titleholder"> @item.title</p>
                                                }
                                                else
                                                {
                                                    <p style="" class="titleholder">@item.title</p>
                                                }

                                            }
                                        </div>
                                        @*@if (@System.Configuration.ConfigurationManager.AppSettings["bigDetail"] == "1")
                                            {
                                                string valueID = "value" + item.ID;
                                                <div class="addholder" style="margin:5px">
                                                    <i id="@minusID" class="fa fa-minus-circle value-minus" style=" border: none;  font-size: 22px; color: #36CDDF;height:20px "></i>
                                                    <div class="entry value @valueID " style=";height:20px;margin:0; border:0px; padding:0; width:10px"><span>0</span></div>
                                                    <i id="@addID" class="fa fa-plus-circle value-plus" style="border: none;  font-size: 22px; color: #36CDDF;height:20px "></i>
                                                </div>

                                            }*@
                                        <div style="margin-top:10px">
                                            @{
                                                if (item.isAvailable == "0")
                                                {
                                                    <div class="c-product-box__row c-product-box__row--price"><div class="c-price"><div class="c-price__value c-price__value--plp"></div></div><div class="c-promotion-box__cover c-promotion-box__cover--out-of-stock"><div class="c-promotion-box__cover-text js-product-status">ناموجود</div></div></div>
                                                }
                                                else
                                                {


                                                    if (item.price == "0")
                                                    {
                                                        <div class="row" style="margin:0px 15px;min-height: 49px;margin-top: 40px;">
                                                            <p style="display:inline-block"> تماس بگیرید</p>
                                                        </div>
                                                    }
                                                    else
                                                    {


                                                        <div style="display:flex; align-items:center; ">
                                                            <div style="width:20%;margin-right:5px">
                                                                <span style="color: white;font-size:13px;background-color: red;border-radius: 15px;padding: 5px 10px;">
                                                                    @item.discount%

                                                                </span>
                                                            </div>
                                                            <div style="flex:1">
                                                                <div>
                                                                    <div class="" style="margin:0px 15px; min-height:20px;text-align:left">
                                                                        <div class="">
                                                                            <div class="">
                                                                                @if (item.price != item.oldPrice)
                                                                                {
                                                                                    <p style="display: inline-block; "> تومان </p> <del style="font-size:15px"> @string.Format("{0:n0}", Convert.ToInt32(@item.oldPrice)) </del>

                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row" style="margin:0px 15px; text-align:left">
                                                                        <p style="display: inline-block; color: black"> تومان </p> <p style="color:black; display:inline-block;font-size:18px; font-weight:500">@string.Format("{0:n0}", Convert.ToInt32(@item.price))</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    }
                                                }

                                            }


                                        </div>
                                        <div style="display:flex;align-items:center; margin-top : 10px; text-align:center; border-top:1px solid #ddd; padding-top:15px">
                                            @*<p class='timer' data-minutes-left=1></p>*@
                                            <i class="fal fa-clock" style="margin-right:10px;font-size:18px"></i>
                                            <p style="font-size:19px; text-align:center" class='timer' data-seconds-left=@item.time></p>
                                        </div>
                                    </div>
                                </div>


                            </div>

                        }



                    </div>
                    <button class='btn btn-default leftRs'><</button>
                    <button class='btn btn-default rightRs'>></button>
                </div>
            </div>
            <div style="flex:1;">
                <div class="row" style=" text-align: center;">
                    <img style="max-width: 70%;" src="/images/wonder.png" alt="شگفت انگیز">

                </div>
            </div>
        </div>
    </div>
}
<style>
    .matn:before {
        content: '';
        width: 100%;
        height: 100%;
        position: absolute;
        left: 0;
        top: 0;
        background: linear-gradient(transparent 120px, white);
    }

    .newBefor:before {
        background: unset;
    }

    .descButton {
        position: absolute;
        bottom: 0px;
        left: 48%;
        padding: 0px 20px;
        border-radius: 5px;
        border: 1px solid #fff;
        background-color: rgba(0,0,0,0.5);
        color: white;
        cursor: pointer;
    }
</style>
<div style="position:relative;  ">
    <div style="display:flex; align-items:center; direction:rtl; text-align:right;box-shadow: 2px 2px 5px -1px rgb(148 149 153);  margin: 10px;border: 1px solid #ddd;border-radius: 5px;">
        <div style="width:25%;text-align:center">
            <img  onerror="this.onerror=null; this.src='/images/placeholder.jpg'" style=" border-radius:7px; margin:25px 0;      max-height: 180px;  max-width: 100%; object-fit: contain" src="~/images/@Model.img" />
        </div>
        <div style="width:75%; padding:50px;position:relative">
            <p class="matn" style="max-height:150px; font-size:12px ; line-height:2.5; overflow:hidden; text-align:justify; ">
                <span>@Model.desc</span>
                <span class="descButton showItem" style="bottom:10px;">بیشتر</span>
                <span class="descButton hideItem" style="display:none;bottom:10px; ">کمتر</span>
            </p>
        </div>
    </div>

</div>





<style>

    .SECTIONHOLDER0 {
        width: 98%;
        background-color: #fff;
        padding: 10px;
        border-radius: 8px;
        box-shadow: 2px 2px 5px -1px rgb(148 149 153);
        margin-bottom: 20px
    }

        .SECTIONHOLDER0 .item {
            text-align: center;
            padding: 15px;
        }

        .SECTIONHOLDER0 .itemHolder {
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 5px
        }

            .SECTIONHOLDER0 .itemHolder:hover {
                box-shadow: 2px 2px 5px -1px rgb(148 149 153);
            }

        .SECTIONHOLDER0 img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 5px;
        }

        .SECTIONHOLDER0 p {
            font-weight: 600
        }

    .subcatTitle {
        text-align: center;
        padding: 10px;
        font-size: 11px;
        white-space: nowrap;
        background-color: #FF4500;
        color: white;
        border-radius: 0 0 5px 5px;
    }

    .submenuImage {
        border-radius: 5px 5px 0 0;
        max-width: 100%;
        max-height: 100%;
        object-fit: scale-down;
    }
</style>
@{

    if (Model.mycat != null)
    {


        <div id="" class="row" style="margin:50px;direction:rtl">


            @foreach (var newitem in Model.mycat)
            {
                string url = Model.baseUrl + "/" + newitem.entitle;


                string imagaddress = newitem.image == null ? "/images/placeholder.jpg" : "/images/" + newitem.image;

                <div class="col-lg-2 item" style="padding:10px; float:right">
                    <div>
                        <a href="@url">
                            <div class="itemHolder" style="width:100%;">
                                <div style="margin:auto;  width:100%">
                                    <img  onerror="this.onerror=null; this.src='/images/placeholder.jpg'" class="submenuImage" src="@imagaddress" style=" " />
                                </div>
                                <p style="" class="subcatTitle">@newitem.title</p>

                            </div>
                        </a>
                    </div>



                </div>



            }


        </div>
    }
}







@if (Model.gourpList != null)
{
    foreach (var group in Model.gourpList)
    {
        string id = group.type + "-" + group.catIDOrLink;

        if (group.Newest != null)
        {
            <div class="maxwidth">
                <div style="padding:2%">
                    <div class="SECTIONHOLDER" style="padding:0;background: rgb(55,2,20);background: linear-gradient(90deg, rgba(55,2,20,1) 0%, rgba(148,15,56,1) 26%, rgba(255,205,217,1) 100%, rgba(180,160,236,1) 100%);">
                        <div class="morphism" style="width:100%; height:100%; ">
                            <div style="padding:25px; text-align:center"><span>@Html.ActionLink(@group.title, "ManageSlide", new { val = @id }, new { style = " color: #fff;" }) </span></div>

                            <div id="bestholder" class="resCarousel" data-items="3-5-5-5" data-slide="1" data-speed="100">

                                <div class="resCarousel-inner">
                                    <div id="/Home/ManageSlide?val= @id" class="item watchall" style="background-color:white; cursor:pointer;height: 100%;box-shadow: 0px 1px 5px 0px rgba(0,0,0,0.29);">
                                        <div href="" style="width:100%;height:100%; display:flex; flex-direction:column; align-items:center;justify-content:center">
                                            <span>
                                                <i style="color:cornflowerblue; font-size:28px" class="fa fa-angle-left"></i>
                                            </span>
                                            <p style="padding:15px">مشاهده همه</p>
                                        </div>
                                    </div>

                                    @Html.Partial("~/Views/Shared/_returnVitirn.cshtml", group.Newest)





                                </div>
                                <button class='btn btn-default leftRs'><</button>
                                <button class='btn btn-default rightRs'>></button>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        }

    }
}
<style>

    .jst-hours {
        float: left;
    }

    .jst-minutes {
        float: left;
    }

    .jst-seconds {
        float: left;
    }

    .jst-clearDiv {
        clear: both;
    }

    .jst-timeout {
        color: red;
    }
</style>
<script src="~/Scripts/jquery.simple.timer.js"></script>
<script>
    $('.timer').startTimer();

</script>
<script>

    $(".itemHolder").hover(function () {
        $(this).css("box-shadow", "2px 0px 26px -10px rgba(0,0,0,0.75)");
        $(this).css("-webkit-box-shadow", "2px 0px 26px -10px rgba(0,0,0,0.75)");
        $(this).css("-moz-box-shadow", "2px 0px 26px -10px rgba(0,0,0,0.75)");

        $(this).find('p').css('background-color', '#4d4d4d');
        $(this).find('p').css('color', '#fff');

    }, function () {
        $(this).css("box-shadow", "unset");
        $(this).css("-webkit-box-shadow", "unset");
        $(this).css("-moz-box-shadow", "unset");
        $(this).find('p').css('background-color', '#FF4500');
        $(this).find('p').css('color', '#fff');
    });

    //ResCarouselCustom();
    var pageRefresh = true;

    function ResCarouselCustom() {
        var items = $("#dItems").val(),
            slide = $("#dSlide").val(),
            speed = $("#dSpeed").val(),
            interval = $("#dInterval").val()

        var itemsD = "data-items=\"" + items + "\"",
            slideD = "data-slide=\"" + slide + "\"",
            speedD = "data-speed=\"" + speed + "\"",
            intervalD = "data-interval=\"" + interval + "\"";


        var atts = "";
        atts += items != "" ? itemsD + " " : "";
        atts += slide != "" ? slideD + " " : "";
        atts += speed != "" ? speedD + " " : "";
        atts += interval != "" ? intervalD + " " : ""

        //console.log(atts);

        var dat = "";
        dat += '<h4>' + atts + '</h4>'
        dat += '<div class=\"resCarousel\" ' + atts + '>'
        dat += '<div class="resCarousel-inner">'
        for (var i = 1; i <= 14; i++) {
            dat += '<div class=\"item\"><div><h1>' + i + '</h1></div></div>'
        }
        dat += '</div>'
        dat += '<button class=\'btn btn-default leftRs\'><i class=\"fa fa-fw fa-angle-left\"></i></button>'
        dat += '<button class=\'btn btn-default rightRs\'><i class=\"fa fa-fw fa-angle-right\"></i></button>    </div>'
        console.log(dat);
        $("#customRes").html(null).append(dat);

        if (!pageRefresh) {
            ResCarouselSize();
        } else {
            pageRefresh = false;
        }
        //ResCarouselSlide();
    }

    $("#eventLoad").on('ResCarouselLoad', function () {
        //console.log("triggered");
        var dat = "";

        var lenghtI = $(this).find(".item").length;
        if (lenghtI <= 30) {
            for (var i = lenghtI; i <= lenghtI + 10; i++) {
                dat += '<div class="item"><div class="tile"><div><h1>' + (i + 1) + '</h1></div><h3>Title</h3><p>content</p></div></div>'
            }
            $(this).append(dat);
        }
    });
</script>
<script>
    $(document).ready(function () {

    })
</script>
<script src="~/Scripts/resCarousel.js"></script>