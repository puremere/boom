@using BotDetect.Web.Mvc;
@using banimo.Classes;

@{
    Layout = "~/Views/Shared/_Layout13.cshtml";
}

<link href="~/Content/loginStyle4.css" rel="stylesheet" />
<link href="@BotDetect.Web.CaptchaUrls.Absolute.LayoutStyleSheetUrl" rel="stylesheet" type="text/css" />



@Scripts.Render("~/Scripts/captcha.validate.js")

<div>

    <main id="main">
        <div class="semi-modal-layout">
            <section class="o-page o-page--account-box">
                <div class="c-account-box card">
                    
                    <div class="c-account-box__headline" style="background-color:transparent; color:#4d4d4d">ثبت‌ نام در @System.Configuration.ConfigurationManager.AppSettings["siteName"]</div>
                    <div class="c-account-box__content">
                        @using (Html.BeginForm("CustomerVerification", "CustomerLogin", FormMethod.Post,
                        new { enctype = "multipart/form-data", id = "registreForm", @class = "c-form-account" }))
                        {
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="rc" value="ZURUU1UzMVowaHFXNFFGZEdCb01pdz09"><input type="hidden" name="rd" value="a3RYVkxNOER0Q0IvaFpnQlVZMVNpdXV2bGxSSWJvRDEvbU8wN0VvdjFFakowc1NVQU9wdW9JOFF5QXhldEx0cg~~">
                            <div class="c-message-light c-message-light--info">ثبت نام تنها با موبایل امکان پذیر است.</div>
                            <div class="c-form-account__title">شماره موبایل</div>
                            <div class="c-form-account__row js-valid-row">
                                <div class="c-form-account__col">
                                    <label id="mainlabla" class="c-ui-input c-ui-input--account-login">
                                        <input id="registertext" class="c-ui-input__field c-ui-input__field--right-placeholder priceItem" type="text" name="registertext" placeholder="شماره موبایل خود را وارد نمایید" value="">

                                        <span id="registererror" class="hase-error c-ui-feedback-hint">  شماره موبایل را وارد نمایید</span>

                                    </label>

                                </div>
                            </div>


                            <div class="c-form-account__title">کلمه عبور</div>
                            <div class="c-form-account__row js-valid-row">
                                <div class="c-form-account__col">
                                    <label id="mainlabla2" class="c-ui-input c-ui-input--account-password">
                                        <input id="registerpassword" class="c-ui-input__field c-ui-input__field--right-placeholder" type="password" name="registerpassword" placeholder="کلمه عبور خود را وارد نمایید">
                                        <div id="registerpassword-error" class="error c-ui-feedback-hint">رمز عبور باید بیش از 7 حرف باشد</div>
                                    </label>
                                </div>
                            </div>
                            <div class="c-form-account__row js-valid-row">
                                <div class="c-form-account__col">
                                    <label id="mainlabla" class="c-ui-input c-ui-input--account-login">
                                        <input id="registertext" class="c-ui-input__field c-ui-input__field--right-placeholder" type="text" name="registerMoaref" placeholder="شماره موبایل معرف را وارد نمایید" value="">
                                    </label>

                                </div>
                            </div>
                            <div class="c-form-account__agree js-valid-row">
                                <label class="c-ui-checkbox c-ui-checkbox--primary">
                                    <input type="checkbox" value="1" name="register[agreement]" id="accountAutoLogin" checked="checked">
                                    <span id="span" class="c-ui-checkbox__check"></span>
                                    <div style="margin-right: 10px;" id="registeragreement-error" class="error c-ui-feedback-hint">برای ثبت نام باید با موافقت خود را با این شرایط اعلام نمایید</div>
                                </label>

                                <label for="accountAutoLogin">
                                    @*<a data-snt-event="dkLoginClick" data-snt-params="{&quot;type&quot;:&quot;privacy-policy&quot;,&quot;site&quot;:&quot;registration-page&quot;}" href="/page/privacy/" class="btn-link-spoiler" title="حریم خصوصی">حریم خصوصی</a>*@
                                    <span>حریم خصوصی و شرایط و قوانین</span>
                                    <a data-snt-event="dkLoginClick" data-snt-params="{&quot;type&quot;:&quot;terms-condition&quot;,&quot;site&quot;:&quot;registration-page&quot;}" href="/Home/TermsOfService" class="btn-link-spoiler" title="شرایط و قوانین">شرایط و قوانین</a>
                                    استفاده از سرویس های سایت @System.Configuration.ConfigurationManager.AppSettings["siteName"] را مطالعه نموده و با کلیه موارد آن موافقم.
                                </label>
                            </div>



                            <div class="c-form-account__row js-valid-row">
                                <div class="c-form-account__col">

                                    @{MvcCaptcha registrationCaptcha = CaptchaHelper.GetRegistrationCaptcha(); }
                                    @if (!registrationCaptcha.IsSolved)
                                    {
                                        <div class="row">
                                            <div class="col-md-12">
                                                @Html.Captcha(registrationCaptcha)
                                            </div>
                                            <div class="col-lg-12" style="margin-top:10px">
                                                @Html.Label("کد را وارد نمایید", new
                                                {
                                                    @class = "col-md-4 control-label",
                                                 @for = "CaptchaCode",
                                                    style = "float:right; margin-top:15px"
                                                })

                                                <div class="col-md-6" style="float:right">
                                                    @Html.TextBox("CaptchaCode", null, new { @class = "form-control captchaVal" })
                                                </div>
                                            </div>

                                        </div>
                                    }
                                </div>
                            </div>

                            <div>


                                <br />


                            </div>
                            <div id="verify" class="mybtn addtocart" style="">
                               
                                <p  class="buttonverif">ثبت نام در @System.Configuration.ConfigurationManager.AppSettings["siteName"]</p>
                                <script>
                                    $("#verify").click(function () {
                                        function isNotNull(str) {
                                            var pattern = /^[A-Za-z0-9]{1,20}$/;
                                            return pattern.test(str);
                                        };
                                        function isValidPhonenumber(phonenumber) {
                                            var pattern = /^09[0-9]{9}$/;
                                            return pattern.test(phonenumber);
                                        };
                                        ///  alert("ssss");
                                        var n = $("#accountAutoLogin:checked").length;
                                        var pass = $("#registerpassword").val();
                                        var val = $("#registertext").val();
                                        //  alert(n);
                                        if ($("#accountAutoLogin:checked").is(':checked')) {
                                            $("#registeragreement-error").css("display", "none");
                                        }
                                        else {
                                            $("#registeragreement-error").css("display", "block");
                                        }

                                        if (pass.length === 0) {

                                            $("#registerpassword-error").css("display", "block");
                                            $("#registertext").css("color", "#ef5662");
                                            $("#registerpassword").css("border", "1px solid #ef5662");
                                            $("#mainlabla2").addClass("error");

                                        }
                                        if (!isValidPhonenumber(val)) {

                                            $("#registererror").css("display", "block");
                                            $("#registertext").css("color", "#ef5662");
                                            $("#registertext").css("border", "1px solid #ef5662");
                                            $("#mainlabla").addClass("error");


                                        }
                                        if (n === 1 && pass.length > 0 && isValidPhonenumber(val)) {


                                            $("form#registreForm").submit();

                                        }
                                        //
                                    })

                                </script>
                                @*<p > افزودن به سبد خرید</p>*@
                            </div>
                        }
                        @*<form class="c-form-account" method="post" id="registerForm" data-name="register" novalidate="novalidate"></form>*@
                    </div>
                    <div class="c-account-box__footer">
                        <span>قبلا در @System.Configuration.ConfigurationManager.AppSettings["siteName"] ثبت‌نام کرده‌اید؟</span>
                        <a data-snt-event="dkLoginClick" data-snt-params="{&quot;type&quot;:&quot;login&quot;,&quot;site&quot;:&quot;registration-page&quot;}" href="/Home/login" class="btn-link-spoiler">وارد شویــد</a>
                    </div>
                </div>
            </section>
           
        </div>
    </main>
</div>
@{
    if (ViewBag.message != null)
    {
        <script>

            toastr.options = {
                "debug": false,
                "positionClass": "toast-top-center",
                "onclick": null,
                "fadeIn": 300,
                "fadeOut": 1000,
                "timeOut": 8000,
                "extendedTimeOut": 1000,


            }
            toastr.error('@ViewBag.message');
        </script>
    }

}


