@model banimo.ViewModel.MainSanadGhazane


<div class="row">
    <div style="overflow-x:auto;padding:10px">
        <div class="panel panel-default">
            <div class="panel-heading" style="    background-image: -webkit-linear-gradient(top,#2a85ae 0,#246388 100%) !important;
    background-image: -o-linear-gradient(top,#2a85ae 0,#246388 100%) !important;
    background-image: -webkit-gradient(linear,left top,left bottom,from(#2a85ae),to(#246388)) !important;
    background-image: linear-gradient(to bottom,#2a85ae 0,#246388 100%) !important;color: #fff">
                <h3 class="panel-title"> لیست اسناد    @*<i id="print" style="cursor:pointer; float:left" class="fa fa-print"></i>*@  <i style="cursor:pointer; float:left; margin-left:20px" class="fa fa-plus addNewSanad"></i></h3>



            </div>
            @if (Model.sanadList != null)
            {
                @*<script>
                        $("#print").click(function () {

                            var obj = @Html.Raw(@Json.Encode(Model.list.myProducts));
                            $("input[name=data]").val(JSON.stringify(obj));
                            $("input[name=id]").val('@Model.id');
                            $("#getPDF").submit();
                            $("#loading").fadeIn();
                            setInterval(function () { $("#loading").fadeOut(); }, 3000);



                        });
                    </script>*@
                <div class="panel-body">
                    <div id="morris-area-chart">
                        @{
                            <div style="overflow:auto">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead>
                                                                <tr>
                                                                    <th>ردیف</th>
                                                                    <th>نوع سند</th>
                                                                 
                                                                    <th>شماره سند اصلی</th>
                                                                    <th>شماره سند فرعی</th>
                                                                    <th>تاریخ سند </th>
                                                                    <th>تاریخ سررسید </th>
                                                                    <th>مالک سند </th>
                                                                    <th>طرف حساب</th>
                                                                    <th>توضیحات</th>
                                                                    <th>وضعیت سند</th>
                                                                    <th> قیمت</th>
                                                                    <th> بانک</th>
                                                                    <th> شماره حساب</th>
                                                                    <th>
                                                                        در جریان وصول
                                                                    </th>
                                                                    <th> وضعیت وصول</th>
                                                                    <th>وضعیت برگشت</th>
                                                                    <th>اتقال به غیر</th>

                                                                </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model.sanadList)
                                        {
                                           
                                            int i = Model.sanadList.IndexOf(item) + 1;
                                            string deleteid = item.ID;
                                        <tr id="@deleteid">

                                            <td>@i</td>
                                            <td>
                                                <span>@item.sanadName</span>
                                            </td>
                                         

                                            <td>@item.orgSerial</td>
                                            <td>@item.fakeSerial</td>
                                            <td>@item.timestamp</td>
                                            <td>@item.dateFinal</td>
                                            <td>@item.ownerTitle</td>
                                            <td>@item.partnerTitle</td>
                                            <td>@item.description</td>
                                            <td>
                                                @item.statusName
                                            </td>
                                            <td> @item.price</td>
                                            <td>@item.bankTitle</td>
                                            <td>@item.hesabTitle</td>
                                            <td>
                                                @if (item.status == "2" || item.status == "3" || item.status == "4")
                                                {
                                                    <input class="form-control " type="checkbox" checked disabled value="درجریان وصول" />
                                                }
                                                else
                                                {
                                                    if (item.status == "5")
                                                    {
                                                        <input class="form-control " type="checkbox"  disabled  value="درجریان وصول" />
                                                    }
                                                    else
                                                    {
                                                        <div class="btn btn-success editItem  jarian">واگذاری به بانک</div>
                                                    }

                                                }

                                            </td>
                                            <td>
                                                @if (item.status == "3")
                                                {
                                                    <input class="form-control" type="checkbox" checked disabled value="وصول شده" />


                                                }
                                                else
                                                {
                                                    if (item.status == "4" || item.status == "5")
                                                    {
                                                        <input class="form-control" type="checkbox"  disabled value="وصول شده" />
                                                    }
                                                    else
                                                    {
                                                        <div class="btn btn-success editItem vosool">ثبت وصول</div>
                                                    }

                                                }

                                            </td>
                                            <td>
                                                @if (item.status == "4")
                                                {
                                                    <input class="form-control" type="checkbox" checked disabled value="برگشت شده" />


                                                }
                                                else
                                                {
                                                    if (item.status == "3" || item.status == "5")
                                                    {
                                                        <input class="form-control" type="checkbox"  disabled value="برگشت شده" />
                                                    }
                                                    else
                                                    {
                                                        <div class="btn btn-success editItem bargasht">ثبت برگشت</div>
                                                    }

                                                }

                                            </td>
                                            <td>
                                                @if (item.status == "5")
                                                {
                                                    <input class="form-control" type="checkbox" checked disabled value="منتقل شده" />


                                                }
                                                else
                                                {
                                                    if (item.status == "1")
                                                    {
                                                        <div class="btn btn-success editItem enteghal">ثبت انتقال</div>
                                                    }
                                                    else
                                                    {
                                                        <input class="form-control" type="checkbox"  disabled value="منتقل شده" />
                                                    }

                                                }

                                            </td>
                                            <td>

                                                @if (item.status == "1")
                                                {
                                                    <div onclick="deleteitemfactor(@deleteid)" class="btn btn-danger deletItem">حذف</div>
                                                }


                                            </td>
                                        </tr>
                                        }

                                    </tbody>
                                </table>
                            </div>
                        }
                    </div>
                </div>
            }
        </div>
    </div>
</div>


<div class="row">
    @{
        var total = (Convert.ToInt32(Model.count) / 12);
        var remain = (Convert.ToInt32(Model.count) % 12);
        if (remain != 0)
        {
            total = total + 1;
        }
        var activ = Convert.ToInt32(Model.current);
        var activminus2 = activ - 2;
        var activminus1 = activ - 1;
        var activplus1 = activ + 1;
        var activplus2 = activ + 2;



        if ((total - activ) > 3 & activ > 3)
        {
            <ul class="pagination">
                <li><a>«</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>1</a></li>
                @if (activminus2 > 2)
                {
                    <li><a>...</a></li>
                }
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activminus2</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activminus1</a></li>
                <li class="active"><a>@activ</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activplus1</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activplus2</a></li>
                <li><a> ...</a></li>
                <li><a>@total</a></li>
                <li><a>»</a></li>
            </ul>
        }
        else if ((total - activ > 3) && !(activ > 3))
        {
            <ul class="pagination">
                @for (int i = 1; i < activ; i++)
                {
                    <li style="cursor:pointer" class="pagingnumberforall"><a>@i</a></li>
                }
                <li class="active"><a>@activ </a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activplus1</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activplus2</a></li>
                <li><a href="#">...</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@total</a></li>
                <li><a href="#">»</a></li>
            </ul>

        }
        else if (!(total - activ > 3) && activ > 3)
        {
            <ul class="pagination">
                <li><a>«</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>1</a></li>
                <li><a>...</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activminus2</a></li>
                <li style="cursor:pointer" class="pagingnumberforall"><a>@activminus1</a></li>
                <li style="cursor:pointer" class="active"><a>@activ </a></li>
                @for (int i = activ + 1; i <= total; i++)
                {
                    <li style="cursor:pointer" class="pagingnumberforall"><a>@i</a></li>
                }
                <li><a>»</a></li>
            </ul>

        }
        else if (total > 1 && !((total - activ) > 3) && !(activ > 3))
        {

            <ul class="pagination">
                @for (int i = 1; i < activ; i++)
                {
                    <li style="cursor:pointer" class="pagingnumberforall"><a>@i</a></li>
                }
                <li class="active"><a href="#">@activ</a></li>
                @for (int i = activ + 1; i <= total; i++)
                {
                    <li style="cursor:pointer" class="pagingnumberforall"><a>@i</a></li>
                }
            </ul>

        }

    }
    <script>
        $(".pagingnumberforall").click(function () {

            var num = this.textContent;
            var value = $("#listofproduct").val();
            var partner = $("#partnerList").val();
            var que = $("#SearchQuery").val();
            $.ajax({
                url: '/admin/GetTheListOfItems',
                data: {
                    page: num,
                    value: value,
                    partner: partner,
                    query: que
                },
                dataType: 'html',
                success: function (data) {

                    $('#listholder').html(data);
                    $('#listholder').css("display", "block");
                },
                error: function () {
                    alert("nashod")
                },
            });
        })

    </script>

</div>

<script>
    $(".addNewSanad").click(function () {
        $("#newSanadModal").modal('toggle');
    })
    $(".jarian").click(function () {
        $("#sanadID").val($(this).parent().parent().attr('id'))
        
        $("#setJarian").modal('toggle');
    })
    $(".vosool").click(function () {
        $("#vossolID").val($(this).parent().parent().attr('id'))
        $("#setVosool").modal('toggle')
    })
    $(".bargasht").click(function () {
        $("#bargashtID").val($(this).parent().parent().attr('id'))
        $("#setBargasht").modal('toggle')
    })
    $(".enteghal").click(function () {
        $("#enteghalID").val($(this).parent().parent().attr('id'))
        $("#setEnteghal").modal('toggle')
    })
    
</script>